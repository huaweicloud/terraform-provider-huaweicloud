---
subcategory: "Data Encryption Workshop (DEW)"
layout: "huaweicloud"
page_title: "HuaweiCloud: huaweicloud_kms_custom_keys_by_tags"
description: |-
  Use this data source to query KMS custom keys by tags.
---

# huaweicloud_kms_custom_keys_by_tags

Use this data source to query KMS custom keys by tags.

## Example Usage

```hcl
variable "action" {}

data "huaweicloud_kms_custom_keys_by_tags" "test" {
  action = var.action
}
```

## Argument Reference

The following arguments are supported:

* `region` - (Optional, String) Specifies the region in which to query the resource.
  If omitted, the provider-level region will be used.

* `action` - (Required, String) Specifies the operation type. The valid values are as follows:
  + **filter**: Indicates querying all information of records by tags.
  + **count**: Indicates querying the total number of records by tags.

* `tags` - (Optional, List) Specifies the tag list, which is a collection of key-value pairs.
  The [tags](#tags_struct) structure is documented below.

* `matches` - (Optional, List) Specifies the field to be matched.
  The [matches](#matches_struct) structure is documented below.

* `sequence` - (Optional, String) Specifies the sequence number of the request message, `36` bytes.
  For example: **919c82d4-8046-4722-9094-35c3c6524cff**.

<a name="tags_struct"></a>
The `tags` block supports:

* `key` - (Optional, String) Specifies the tag key. A CMK can have a maximum of `10` keys, and each of them is unique and
  cannot be empty. A key cannot have duplicate values. It consists of up to `36` characters.

* `values` - (Optional, List) Specifies the tag value set.

<a name="matches_struct"></a>
The `matches` block supports:

* `key` - (Optional, String) Specifies the field to be matched, for example, **resource_name**.

* `value` - (Optional, String) Specifies the value to be matched. It contains a maximum of `255` characters and
  cannot be empty.

## Attribute Reference

In addition to all arguments above, the following attributes are exported:

* `id` - The data source ID.

* `total_count` - The total number of records.

* `resources` - The list of key resources.
  The [resources](#resources_struct) structure is documented below.

<a name="resources_struct"></a>
The `resources` block supports:

* `resource_id` - The resource ID.

* `resource_detail` - The key details.
  The [resource_detail](#resource_detail_struct) structure is documented below.

* `resource_name` - The resource name. This parameter is an empty string by default.

* `tags` - The tag list. If there is no tag in the list, an empty array is returned.
  The [tags](#resource_tags_struct) structure is documented below.

<a name="resource_detail_struct"></a>
The `resource_detail` block supports:

* `key_id` - The CMK ID.

* `domain_id` - The user domain ID.

* `key_alias` - The key alias.

* `realm` - The key realm.

* `key_spec` - The key generation algorithm. The values can be **AES_256**, **SM4**, **RSA_2048**, **RSA_3072**,
  **RSA_4096**, **EC_P256**, **EC_P384**, **SM2**.

* `key_usage` - The CMK usage. The value can be **ENCRYPT_DECRYPT**, **SIGN_VERIFY**.

* `key_description` - The key description.

* `creation_date` - The time when the key was created. The timestamp indicates the total seconds past the start of
  the epoch date (January 1, 1970).

* `scheduled_deletion_date` - The time when the key was scheduled to be deleted. The timestamp indicates the total
  seconds past the start of the epoch date **(January 1, 1970)**.

* `key_state` - The key status, which matches the regular expression **^[1-5]{1}$**. The valid values are as follows:  
  + **1**: Indicates to be activated.  
  + **2**: Indicates enabled.  
  + **3**: Indicates disabled.  
  + **4**: Indicates pending deletion.  
  + **5**: Indicates pending import.

* `default_key_flag` - The master key identifier. The valid values are as follows:  
  + **1**: Indicates default master keys.
  + **2**: Indicates non-default master keys.

* `key_type` - The key type.

* `expiration_time` - The time when the key material expires. The timestamp indicates the total seconds past the start of
  the epoch date **(January 1, 1970)**.

* `origin` - The key source. The valid values are as follows:  
  + **kms**: Indicates the key material was generated by KMS.
  + **external**: Indicates the key material was imported.

* `key_rotation_enabled` - The key rotation status. The default value is **false**, indicating that key rotation is disabled.

* `sys_enterprise_project_id` - The enterprise project ID. Its default value is **0**.
  For users who have enabled the enterprise project function, this value indicates that resources are in the default
  enterprise project. For users who have not enabled the enterprise project function, this value indicates that resources
  are not in the default enterprise project.

* `keystore_id` - The keystore ID.

* `key_label` - The key label in the encryption machine.

* `partition_type` - The partition type, enumerated as follows:  
  + **1**: Indicates professional version.

<a name="resource_tags_struct"></a>
The `tags` block supports:

* `key` - The tag key.

* `value` - The tag value.
