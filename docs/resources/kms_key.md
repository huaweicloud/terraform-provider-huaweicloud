---
subcategory: "Data Encryption Workshop (DEW)"
layout: "huaweicloud"
page_title: "HuaweiCloud: huaweicloud_kms_key"
description: |-
  Manages a KMS key resource within HuaweiCloud.
---

# huaweicloud_kms_key

Manages a KMS key resource within HuaweiCloud.

## Example Usage

```hcl
variable "key_alias" {}

resource "huaweicloud_kms_key" "test" {
  key_alias    = var.key_alias
  pending_days = "7"
}
```

## Argument Reference

The following arguments are supported:

* `region` - (Optional, String, ForceNew) Specifies the region in which to create the resource.
  If omitted, the provider-level region will be used. Changing this parameter will create a new resource.

* `key_alias` - (Required, String) Specifies the alias name of the KMS key.
  Only letters, digits, underscores(_), hyphens(-), colons(:) and slash(/) are allowed.
  The valid length is limited from `1` to `255` characters.
  The name must be different from the alias of the default master key.

* `key_algorithm` - (Optional, String, ForceNew) Specifies the generation algorithm of the KMS key.
  Changing this parameter will create a new resource.
  The default value is **AES_256**. The valid values are as follows:
  + **AES_256**
  + **SM4**
  + **RSA_2048**
  + **RSA_3072**
  + **RSA_4096**
  + **EC_P256**
  + **EC_P384**
  + **SM2**

* `key_usage` - (Optional, String, ForceNew) Specifies the KMS key usage.
  Changing this parameter will create a new resource.
  The value can be **ENCRYPT_DECRYPT** (symmetric key default value) or **SIGN_VERIFY** (asymmetric key default value).

* `key_description` - (Optional, String) Specifies the description of the KMS key.

* `origin` - (Optional, String, ForceNew) Specifies the source of the KMS key.
  Changing this parameter will create a new resource.
  The default value is **kms**. The valid values are as follows:
  + **kms**: The key is generated by KMS.
  + **external**: The key is external imported.

* `enterprise_project_id` - (Optional, String) Specifies the enterprise project ID to which the KMS key belongs.
  If omitted, the default enterprise project will be used.
  If the enterprise project function is not enabled, ignore this parameter.

* `keystore_id` - (Optional, String, ForceNew) Specifies the keystore ID to which the KMS key belongs.
  Changing this parameter will create a new resource.
  The KMS default keystore is used by default.

* `tags` - (Optional, Map) Specifies the key/value pairs to associate with the KMS key.

* `is_enabled` - (Optional, Bool) Specifies whether the KMS key is enabled.
  The default value is **true**.
  This parameter is not supported when creating an external import key for the first time.

* `rotation_enabled` - (Optional, Bool) Specifies whether the KMS key rotation is enabled.
  The default value is **false**.

  -> The default master keys and externally imported keys can not be rotated.

* `rotation_interval` - (Optional, Int) Specifies the KMS key rotation period.
  The valid value range from `30` to `365`. The default value is `365`.

* `pending_days` - (Optional, String) Specifies the number of days after which the KMS key is scheduled to be deleted.
  The valid value range from `7` to `1,096`.

## Attribute Reference

In addition to all arguments above, the following attributes are exported:

* `id` - The resource ID.

* `key_id` - The ID of the KMS key.

* `domain_id` - The ID of the user account.

* `key_state` - The current status of the KMS key.
  The valid values are as follows:
  + **1**: To be activated.
  + **2**: Enabled.
  + **3**: Disabled.
  + **4**: Pending deletion.
  + **5**: Pending import.

* `default_key_flag` - The default master Key identifier.
  The value can be **1** (indicated the KMS key is default master key) or
  **0** (indicated the KMS key is not default master key).

* `rotation_number` - The total number of key rotations.

* `expiration_time` - The expiration time of the KMS key material.
  The value is a time stamp, e.g. **1723272402000**.

* `creation_date` - The creation time of the KMS key.
  The value is a time stamp, e.g. **1723272402000**.

* `scheduled_deletion_date` - The scheduled deletion time of the KMS key.
  The value is a time stamp, e.g. **1723272402000**.

## Import

The KMS Key resource can be imported using the `id`, e.g.

```bash
$ terraform import huaweicloud_kms_key.test <id>
```

Note that the imported state may not be identical to your resource definition, due to some attributes missing from the
API response, security or some other reason.
The missing attributes include: `pending_days` and `is_enabled`.
It is generally recommended running `terraform plan` after importing the resource.
You can then decide if changes should be applied to the resource, or the resource definition should be updated to
align with the resource. Also you can ignore changes as below.

```hcl
resource "huaweicloud_kms_key" "test" {
  ...

  lifecycle {
    ignore_changes = [
      pending_days, is_enabled
    ]
  }
}
```
